{# templates/admin/base_site.html #}
{% extends "admin/base.html" %}
{% load i18n static %}

{% block branding %}
  {{ block.super }}  {# Keep default branding #}
{% endblock %}

{% block nav-global %}
  {{ block.super }}  {# Preserve Welcome, username, password, logout #}
  <div id="mid-header-extras">
    <button id="theme-toggle" class="btn compact" title="{% trans 'Toggle dark/light mode' %}">ðŸŒ—</button>
    <a href="http://dgc4sk8c0skk4ow4c0sw4oc4.159.69.42.206.sslip.io/ar"
       class="btn compact" target="_blank" title="{% trans 'View site' %}">
      {% trans "View site" %}
    </a>
  </div>
{% endblock %}

{% block extrahead %}
  {{ block.super }}
  <style>
    /* Compact button style */
    .btn.compact {
      display: inline-block;
      margin: 0 .5em;
      padding: .2em .6em;
      font-size: .85em;
      line-height: 1;
      border: 1px solid #ccc;
      border-radius: .25em;
      background: #f7f7f7;
      text-decoration: none;
      color: #333;
      transition: background .2s, color .2s;
      cursor: pointer;
    }
    .btn.compact:hover {
      background: #e2e2e2;
    }

    /* Middle header container */
    #header nav {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    #mid-header-extras {
      margin: 0 auto;
      display: flex;
      gap: .5em;
    }

    /* Dark mode styles */
    html.dark-mode {
      background: #2b2b2b;
      color: #eee;
    }
    html.dark-mode .btn.compact {
      color: #ddd;
      background: #3b3b3b;
      border-color: #555;
    }
    html.dark-mode .btn.compact:hover {
      background: #444;
      color: #fff;
    }
  </style>
  <script>
    document.addEventListener("DOMContentLoaded", function() {
      const btn = document.getElementById("theme-toggle");
      const root = document.documentElement;
      if (localStorage.getItem("darkMode") === "true") {
        root.classList.add("dark-mode");
      }
      btn.addEventListener("click", function() {
        root.classList.toggle("dark-mode");
        localStorage.setItem(
          "darkMode",
          root.classList.contains("dark-mode")
        );
      });
    });
  </script>
{% endblock %}
